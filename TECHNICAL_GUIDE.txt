====================================================================
راهنمای فنی و نگهداری پلاگین چندزبانه Fikup Poly (نسخه اختصاصی)
====================================================================

این فایل برای توسعه‌دهندگان و مدیران سایت نوشته شده است.
اگر قصد آپدیت قالب WoodMart را دارید، لطفاً ابتدا این فایل را مطالعه کنید.

--------------------------------------------------------------------
۱. معماری کلی
--------------------------------------------------------------------
این پلاگین برای جدا کردن کامل نسخه فارسی و انگلیسی (پست‌های جداگانه) طراحی شده است.
نقطه حساس این سیستم، اتصال آن به قالب WoodMart برای تغییر خودکار "هدر" و "فوتر" در صفحات انگلیسی است.

تمام منطق تغییر هدر و فوتر در فایل زیر قرار دارد:
/includes/class-ui-logic.php

--------------------------------------------------------------------
۲. هوک‌های حیاتی (Vital Hooks)
--------------------------------------------------------------------
این پلاگین برای کارکرد صحیح به فیلترهای (Filter Hooks) زیر در قالب WoodMart وابسته است.
اگر قالب آپدیت شود و نام این فیلترها تغییر کند، هدر یا فوتر انگلیسی از کار می‌افتد.

الف) هوک هدر (Header):
   - نام هوک: woodmart_get_current_header_id
   - محل در قالب: inc/modules/header-builder/class-frontend.php (متد get_current_id)
   - کارکرد: این پلاگین با اولویت 999 به این هوک متصل می‌شود و اگر در صفحه انگلیسی باشیم، ID هدر انگلیسی را برمی‌گرداند.

ب) هوک فوتر و تنظیمات (Footer & Options):
   - نام هوک: woodmart_option
   - محل در قالب: inc/functions.php (تابع woodmart_get_opt)
   - کارکرد: این هوک بسیار حیاتی است. ما با استفاده از این هوک، مقادیر تنظیمات قالب را در لحظه تغییر می‌دهیم.
     وقتی قالب می‌پرسد "نوع فوتر چیست؟" (footer_content_type)، ما پاسخ می‌دهیم "html_block".
     وقتی می‌پرسد "کدام بلوک؟" (footer_html_block)، ما ID فوتر انگلیسی را می‌دهیم.

--------------------------------------------------------------------
۳. چک‌لیست آپدیت قالب (Troubleshooting Update)
--------------------------------------------------------------------
اگر قالب WoodMart را آپدیت کردید و متوجه شدید هدر یا فوتر انگلیسی نمایش داده نمی‌شود:

گام ۱: بررسی فایل class-ui-logic.php
   مطمئن شوید که پلاگین فعال است و ID هدر و فوتر در تنظیمات پلاگین به درستی وارد شده‌اند.

گام ۲: بررسی هوک Header Builder
   به مسیر wp-content/themes/woodmart/inc/modules/header-builder/class-frontend.php بروید.
   جستجو کنید دنبال: apply_filters( 'woodmart_get_current_header_id' ... )
   اگر نام این فیلتر تغییر کرده بود، باید در فایل class-ui-logic.php پلاگین نیز نام آن را آپدیت کنید.

گام ۳: بررسی هوک تنظیمات (Footer)
   به مسیر wp-content/themes/woodmart/inc/functions.php بروید.
   تابع woodmart_get_opt را پیدا کنید.
   ببینید آیا هنوز از apply_filters( 'woodmart_option', ... ) استفاده می‌کند؟
   اگر نام فیلتر عوض شده بود، در پلاگین اصلاح کنید.

--------------------------------------------------------------------
۴. نکات ایمنی
--------------------------------------------------------------------
- هرگز فایل‌های هسته قالب WoodMart را مستقیم ویرایش نکنید، زیرا با آپدیت بعدی پاک می‌شوند.
- تمام تغییرات فقط باید در همین پلاگین (Fikup Poly) اعمال شوند.
- برای استایل دهی به نسخه انگلیسی، از بخش CSS در تنظیمات همین پلاگین استفاده کنید (کلاس‌های body در حالت انگلیسی دارای کلاس .fikup-en-mode هستند).

=====================================================================